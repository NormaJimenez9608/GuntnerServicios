<div class="fondo1">
  <app-general-header></app-general-header>

  <div class="row">
    <div class="col-md-3"></div>
<p style="size: 25px;" align="center" class="Name col-md-4">ALARMS HISTORY</p> 
<div class="col-md-5"></div>
</div>
  
  
  <div class="container-fluid">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-7">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link " href="#" routerLink="/Systems/Devices">Devices</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="#" routerLink="/Systems/Alarms">Alarms</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="#" routerLink="/Systems/AlarmsHistory">Alarms History</a>
          </li>
      </ul>
      <div class="blankspace"> </div>
      


 <p class="fecha" >Start Date and Hour:  <input type="datetime-local" name="fechahora" step="1" min="2018-01-01T00:00" max="2025-12-31T12:00"   [(ngModel)]="alarms.startDate"></p> 
 <p class="fecha">End  Date and Hour: <input type="datetime-local" name="fechahora" step="1" min="2018-01-01T00:00" max="2025-12-31T12:00"  [(ngModel)]="alarms.endDate"></p> 
 <button type="button" (click)="Alarms()" class="btn btn-secondary btn-sm">OK</button>
 <div class="blankspace"> </div>
  
 <table class="table table-bordered " id="testTable">
 <thead>
   <tr class="name">
    <th scope="col">Status</th>
      <th scope="col">Device Name</th>
      <th scope="col">Name</th>
      <th scope="col">Severity</th>
      <th scope="col">Time</th>
      <th scope="col">Information</th>
     
   </tr>
 </thead>
 <tbody >
   <tr>
    <tr *ngFor="let data of listalarms | paginate: { itemsPerPage: 10, currentPage: p }">
      
      <th>{{data.action}}</th>
      <td>{{data.deviceName}}</td>
      <td>{{data.name}}</td>
      <td *ngIf="data.severity === 0">Indeterminate</td>
      <td *ngIf="data.severity === 1">Critical</td>
      <td *ngIf="data.severity === 2">Major</td>
      <td *ngIf="data.severity === 3">Minor</td>
      <td *ngIf="data.severity === 4">Warning</td>
      <td *ngIf="data.severity === 5">Information</td>
      <td>{{data.timestamp |date:"MM/dd/yyyy 'at' h:mma"}}</td>
      <td>{{data.info}}</td>
 </tbody>
 
   </table>
   <pagination-controls (pageChange)="p = $event"></pagination-controls>
<<<<<<< HEAD
=======
<<<<<<< HEAD
<button type="button" (click)="TabletoExcel('testTable1')" class="btn btn-info  btn-lg" >Download data as file</button>
<button type="button" (click)="tableToExcel('testTable1', 'Alarms History')" class="btn btn-info  btn-lg" >Download data as file with 1 example</button>

<table style="display: none" class="table table-bordered " id="testTable1">
  <thead>
    <tr class="name">
     <th scope="col">Status</th>
       <th scope="col">Device Name</th>
       <th scope="col">Name</th>
       <th scope="col">Severity</th>
       <th scope="col">Time</th>
       <th scope="col">Information</th>
      
    </tr>
  </thead>
  <tbody >
    <tr>
     <tr *ngFor="let data of listalarms">
       
       <th>{{data.action}}</th>
       <td>{{data.deviceName}}</td>
       <td>{{data.name}}</td>
       <td *ngIf="data.severity === 0">Indeterminate</td>
       <td *ngIf="data.severity === 1">Critical</td>
       <td *ngIf="data.severity === 2">Major</td>
       <td *ngIf="data.severity === 3">Minor</td>
       <td *ngIf="data.severity === 4">Warning</td>
       <td *ngIf="data.severity === 5">Information</td>
       <td>{{data.timestamp |date:"MM/dd/yyyy 'at' h:mma"}}</td>
       <td>{{data.info}}</td>
  </tbody>
  
    </table>
<div class="blankspace2"> </div>

   <!-- Boton para guardar en angular -->
   
   <!-- Boton para guardar en JS -->
   <button type="button" (click)="tableToExcel('testTable1', 'Alarms History')" class="btn btn-info  btn-lg" >Download data as file</button>
   
   <table style="display: none" class="table table-bordered " id="testTable1">
     <thead>
       <tr class="name">
        <th scope="col">Status</th>
          <th scope="col">Device Name</th>
          <th scope="col">Name</th>
          <th scope="col">Severity</th>
          <th scope="col">Time</th>
          <th scope="col">Information</th>
         
       </tr>
     </thead>
     <tbody >
       <tr>
        <tr *ngFor="let data of listalarms">
          
          <th>{{data.action}}</th>
          <td>{{data.deviceName}}</td>
          <td>{{data.name}}</td>
          <td *ngIf="data.severity === 0">Indeterminate</td>
          <td *ngIf="data.severity === 1">Critical</td>
          <td *ngIf="data.severity === 2">Major</td>
          <td *ngIf="data.severity === 3">Minor</td>
          <td *ngIf="data.severity === 4">Warning</td>
          <td *ngIf="data.severity === 5">Information</td>
          <td>{{data.timestamp |date:"MM/dd/yyyy 'at' h:mma"}}</td>
          <td>{{data.info}}</td>
     </tbody>
     
       </table>
   
<div class="blankspace2"> </div>